<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JoseTecnology | Servicio Técnico y Pantallas en Mosquera</title>
    <meta
      name="description"
      content="Reparación de teléfonos móviles en Mosquera, Expertos en reparación de celulares en Mosquera. Cambio de pantallas originales, baterías y servicio técnico garantizado. ¡Cotiza tu pantalla ahora!"
    />
    <meta
      name="description"
      content="samsung pantalla funza, huawei pantalla funza, xiaomi repuestos funza, motorola reparación funza, iphone pantalla original funza, cambio de pantalla funza, reparación de celulares funza, repuestos de celulares funza, técnicos especializados funza, cotización de pantallas funza"
    />
    <meta
      name="keywords"
      content="reparación de celulares, cambio de pantalla, servicio técnico Mosquera, repuestos de celulares, JoseTecnology ,pantallas originales, baterías para celulares, reparación rápida, técnicos especializados, cotización de pantallas Mosquera ,cotizacion de pantalla funza, reparación de móviles, servicio de reparación de teléfonos, repuestos originales, técnicos certificados, garantía en reparaciones, servicio de calidad, Mosquera tecnología"
    />

    <meta
      property="og:title"
      content="JoseTecnology - Servicio Técnico Profesional"
    />
    <link rel="stylesheet" href="css/styles.css" />
    <meta property="og:image" content="https://tuweb.online/rs/logo.jpg" />
    <style>
      /* Estilos básicos para el contenedor de resultados si no están en tu CSS */
      #resultados-busqueda {
        max-height: 450px;
        overflow-y: auto;
        margin: 15px 0;
        padding: 0 10px;
      }
      .card-producto {
        background: #fff;
        padding: 12px;
        margin-bottom: 10px;
        border-radius: 8px;
        border: 1px solid #ddd;
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
      }
    </style>
  </head>
  <body>
    <header>
      <div class="logo-container">
        <img
          src="rs/FB_IMG_1752676650653.jpg"
          alt="Logo JoseTecnology"
          class="logo"
        />
        <h1>JoseTecnology</h1>
      </div>
      <nav class="menu">
        <a href="index.html">Inicio</a>
        <a href="servicios.html">Cuentas stream</a>
        <a href="software.html">Servicio Tecnico</a>
        <a href="//wa.me/573222190187" target="_blank">Contactanos</a>
      </nav>
    </header>

    <form class="buscar-button">
      <input type="text" placeholder="Escribe el modelo de tu pantalla..." />
      <button type="submit">Buscar</button>
    </form>

    <script>
      let todosLosProductos = [];
      const formulario = document.querySelector(".buscar-button");
      const input = formulario.querySelector("input");

      // Creamos el contenedor de resultados después del buscador
      const contenedorResultados = document.createElement("div");
      contenedorResultados.id = "resultados-busqueda";
      formulario.parentNode.insertBefore(
        contenedorResultados,
        formulario.nextSibling
      );

      // 1. Cargar base de datos local
      async function cargarDatos() {
        try {
          const respuesta = await fetch("productos.json");
          todosLosProductos = await respuesta.json();
          console.log("Inventario cargado correctamente");
        } catch (e) {
          console.error("Error cargando productos.json");
        }
      }

      // 2. Lógica de búsqueda y cálculo
      function ejecutarBusqueda() {
        const busqueda = input.value.toLowerCase().trim();
        contenedorResultados.innerHTML = ""; // Limpiar caché visual

        if (busqueda.length < 2) return;

        const filtrados = todosLosProductos.filter(
          (p) =>
            (p.nombre && p.nombre.toLowerCase().includes(busqueda)) ||
            (p.alias && p.alias.toLowerCase().includes(busqueda))
        );

        if (filtrados.length === 0) {
          contenedorResultados.innerHTML =
            "<p style='text-align:center; color:gray; padding:20px;'>No se encontró el modelo. Escríbenos para consultar.</p>";
          return;
        }

        // Mostrar primeros 15 resultados
        filtrados.slice(0, 15).forEach((p) => {
          // --- CÁLCULO DE PRECIO CON AUMENTO ---
          const precioBase = parseFloat(
            p.precio_venta_online || p.precio_venta || 0
          );
          const precioFinal = precioBase + 70000;

          // Formatear a pesos colombianos
          const precioFormateado = new Intl.NumberFormat("es-CO", {
            style: "currency",
            currency: "COP",
            maximumFractionDigits: 0,
          }).format(precioFinal);

          // Crear mensaje para WhatsApp
          const textoWhatsApp = encodeURIComponent(
            `Hola JoseTecnology, me interesa la pantalla: ${p.nombre}. El precio con instalación es de ${precioFormateado}. ¿Tienen disponibilidad?`
          );

          // Crear la tarjeta (card)
          const card = document.createElement("div");
          card.className = "card-producto";
          card.innerHTML = `
            <div>
              <div style="font-size:13px; font-weight:bold; color:#333; text-transform:uppercase;">${p.nombre}</div>
              <div style="color:#2ecc71; font-weight:bold; font-size:1.1em;">${precioFormateado}</div>
              <small style="color:#888; font-size:10px;">Coordinar envío o instalación</small>
            </div>
            <a href="https://wa.me/573222190187?text=${textoWhatsApp}" 
               target="_blank" 
               style="background:#25d366; color:#fff; padding:8px 15px; border-radius:20px; text-decoration:none; font-size:12px; font-weight:bold;">
               Pedir
            </a>
          `;
          contenedorResultados.appendChild(card);
        });
      }

      // Eventos
      input.addEventListener("input", ejecutarBusqueda);
      formulario.addEventListener("submit", (e) => {
        e.preventDefault();
        ejecutarBusqueda();
      });

      cargarDatos();
    </script>

    <section class="hero">
      <h2>Reparación confiable de celulares</h2>
      <p>
        Somos especialistas en reparación de pantallas, baterías, puertos de
        carga y más. Confía tu equipo a manos expertas.
      </p>
      <img
        src="rs/cb64ed071a6dd4e65e7c440448909090.jpg"
        alt="Técnico reparando celular"
      />
      <a href="//wa.me/573222190187" class="whatsapp-button" target="_blank"
        >Cotizar por WhatsApp</a
      >
    </section>

    <footer>&copy; 2025 JoseTecnology - Todos los derechos reservados</footer>
  </body>
</html>
